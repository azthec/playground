# Tracing Prototype

This setup demonstrates how to use [OpenTelemetry Collector](https://opentelemetry.io/docs/collector/), [Tempo](https://grafana.com/oss/tempo/), and [Grafana](https://grafana.com/oss/grafana/) for distributed tracing and monitoring. It provides a free, open-source solution that integrates well with existing monitoring stacks. The main advantages of this approach are control over data, customization, and compatibility with other monitoring tools.

This setup has the following components:
 - OpenTelemetry Collector: Vendor-agnostic ingestion, processing, and exporting of telemetry data.
 - Tempo: The storage and querying backend for our traces.
 - Grafana: Used for metrics and tracing visualization. Already deployed on our clusters.

The collector is configured to receive telemetry data via HTTP or GRPC requests and forward that data to the local instance of Tempo.
 - Grafana is configured to use Tempo as a data source to query and visualize the traces.
 - Data can be generated by curl requests with made-up spans and traces.
 - See [Generate and collect telemetry data](https://opentelemetry.io/docs/collector/quick-start/#generate-and-collect-telemetry) for more options.

## Running the Setup

Start the services with Docker Compose:

```bash
docker-compose -f compose.yaml up -d
```

## Generating and Collecting Telemetry Data

You can generate and send data using `curl`:

```bash
curl -X POST http://localhost:4318/v1/traces -H "Content-Type: application/json" --data @span.json
```

## Viewing Traces in Grafana

Visit `http://localhost:3000` to access the Grafana UI. Grafana is configured to use Tempo as a data source for tracing.

You can explore and query the Tempo data source to visualize traces.

